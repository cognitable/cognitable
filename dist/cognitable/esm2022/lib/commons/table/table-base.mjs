import { EventEmitter } from '@angular/core';
export class TableBase {
    // Header
    tableHeaders;
    // Data
    tableData;
    // Backup
    backupData; // For backup the table data, so that additional processes won't be affecting it
    // Pagination
    paginationEnabled = false;
    allowedPageSizes = [10, 25, 50, 100];
    pageSize = 10;
    totalPages = 0;
    currentPage = 1;
    paginationButtons = [];
    // Table Action Events
    cellContentClicked = new EventEmitter();
    cellContentHover = new EventEmitter();
    // Table Size
    height = 400;
    // Overlays
    loading = false;
    noData = false;
    loadingMessage;
    noDataMessage;
    constructor() { }
    setBackupData(data) {
        this.backupData = JSON.parse(JSON.stringify(data ?? []));
    }
    sort(field, order) {
        if (!order) {
            this.tableData = JSON.parse(JSON.stringify(this.backupData ?? []));
        }
        else {
            this.tableData = this.tableData.sort((a, b) => {
                if (a[field] < b[field]) {
                    return order === 'asc' ? -1 : 1;
                }
                if (a[field] > b[field]) {
                    return order === 'asc' ? 1 : -1;
                }
                return 0;
            });
        }
    }
    filter(filterValue, headers) {
        // this.backupData = (filterValue && !this.backupData?.length) ? this.setBackupData(this.tableData) : this.backupData; // Taking the backup of original data
        if (headers?.length) {
            this.filterBySpecifiedFields(headers, filterValue);
        }
        else {
            this.filterByAllFields(filterValue);
        }
    }
    filterByAllFields(filterValue) {
        const nonSearchableHeaders = this.tableHeaders?.filter(header => header?.search?.columnSearchIgnored); // Filtering the search not allowed column headers
        const nonSearchFields = nonSearchableHeaders?.map(header => header.field);
        let temporaryData = JSON.parse(JSON.stringify(this.backupData ?? []));
        temporaryData = temporaryData.filter((record) => {
            for (const recordField in (record ?? {})) {
                if (!nonSearchFields?.includes(recordField)) {
                    const value = record[recordField];
                    if (typeof value === 'string' && value?.length && value.toLowerCase().includes(filterValue.toLowerCase())) {
                        return true;
                    }
                }
            }
            return false;
        });
        this.tableData = temporaryData;
    }
    filterBySpecifiedFields(filterValue, headers) {
    }
    loadPagination() {
        if (this.paginationEnabled && this.backupData?.length) {
            this.totalPages = Math.ceil(this.pageSize && this.backupData.length ? this.backupData.length / this.pageSize : 0);
            this.changePagination(1);
        }
    }
    changePagination(page) {
        this.currentPage = page;
        this.tableData = this.getCurrentPageData();
    }
    getCurrentPageData() {
        if (this.currentPage && this.pageSize && this.backupData?.length) {
            const pageStartIndex = (this.currentPage * this.pageSize) - this.pageSize;
            return this.backupData.slice(pageStartIndex, pageStartIndex + this.pageSize);
        }
        return [];
    }
    setLoading(loading) {
        this.loading = loading;
    }
    setNoData(loading) {
        this.loading = loading;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtYmFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tbW9ucy90YWJsZS90YWJsZS1iYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFM0MsTUFBTSxPQUFPLFNBQVM7SUFDbEIsU0FBUztJQUNGLFlBQVksQ0FBNEI7SUFFL0MsT0FBTztJQUNBLFNBQVMsQ0FBTTtJQUV0QixTQUFTO0lBQ0YsVUFBVSxDQUFNLENBQUMsZ0ZBQWdGO0lBRXhHLGFBQWE7SUFDYixpQkFBaUIsR0FBWSxLQUFLLENBQUM7SUFDbkMsZ0JBQWdCLEdBQWEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMvQyxRQUFRLEdBQVcsRUFBRSxDQUFDO0lBQ3RCLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDZixXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLGlCQUFpQixHQUFVLEVBQUUsQ0FBQztJQUU5QixzQkFBc0I7SUFDZixrQkFBa0IsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0lBQ3hDLGdCQUFnQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFFN0MsYUFBYTtJQUNiLE1BQU0sR0FBVyxHQUFHLENBQUM7SUFFckIsV0FBVztJQUNYLE9BQU8sR0FBWSxLQUFLLENBQUM7SUFDekIsTUFBTSxHQUFZLEtBQUssQ0FBQztJQUN4QixjQUFjLENBQVU7SUFDeEIsYUFBYSxDQUFVO0lBRXZCLGdCQUFnQixDQUFDO0lBRWpCLGFBQWEsQ0FBQyxJQUFTO1FBQ25CLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQzVELENBQUM7SUFFRCxJQUFJLENBQUMsS0FBYSxFQUFFLEtBQXlC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R0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xILElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixDQUFDO0lBQ0wsQ0FBQztJQUVELGdCQUFnQixDQUFDLElBQVM7UUFDdEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDeEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztJQUMvQyxDQUFDO0lBRUQsa0JBQWtCO1FBQ2QsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUMvRCxNQUFNLGNBQWMsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDMUUsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqRixDQUFDO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDO0lBRUQsVUFBVSxDQUFDLE9BQWdCO1FBQ3ZCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0lBQzNCLENBQUM7SUFFRCxTQUFTLENBQUMsT0FBZ0I7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDM0IsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtUYWJsZUhlYWRlcn0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWhlYWRlcic7XG5pbXBvcnQge0V2ZW50RW1pdHRlcn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBjbGFzcyBUYWJsZUJhc2Uge1xuICAgIC8vIEhlYWRlclxuICAgIHB1YmxpYyB0YWJsZUhlYWRlcnM6IFRhYmxlSGVhZGVyW10gfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBEYXRhXG4gICAgcHVibGljIHRhYmxlRGF0YTogYW55O1xuXG4gICAgLy8gQmFja3VwXG4gICAgcHVibGljIGJhY2t1cERhdGE6IGFueTsgLy8gRm9yIGJhY2t1cCB0aGUgdGFibGUgZGF0YSwgc28gdGhhdCBhZGRpdGlvbmFsIHByb2Nlc3NlcyB3b24ndCBiZSBhZmZlY3RpbmcgaXRcblxuICAgIC8vIFBhZ2luYXRpb25cbiAgICBwYWdpbmF0aW9uRW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGFsbG93ZWRQYWdlU2l6ZXM6IG51bWJlcltdID0gWzEwLCAyNSwgNTAsIDEwMF07XG4gICAgcGFnZVNpemU6IG51bWJlciA9IDEwO1xuICAgIHRvdGFsUGFnZXMgPSAwO1xuICAgIGN1cnJlbnRQYWdlID0gMTtcbiAgICBwYWdpbmF0aW9uQnV0dG9uczogYW55W10gPSBbXTtcblxuICAgIC8vIFRhYmxlIEFjdGlvbiBFdmVudHNcbiAgICBwdWJsaWMgY2VsbENvbnRlbnRDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIHB1YmxpYyBjZWxsQ29udGVudEhvdmVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLy8gVGFibGUgU2l6ZVxuICAgIGhlaWdodDogbnVtYmVyID0gNDAwO1xuXG4gICAgLy8gT3ZlcmxheXNcbiAgICBsb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgbm9EYXRhOiBib29sZWFuID0gZmFsc2U7XG4gICAgbG9hZGluZ01lc3NhZ2UhOiBzdHJpbmc7XG4gICAgbm9EYXRhTWVzc2FnZSE6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgICBzZXRCYWNrdXBEYXRhKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLmJhY2t1cERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEgPz8gW10pKVxuICAgIH1cblxuICAgIHNvcnQoZmllbGQ6IHN0cmluZywgb3JkZXI6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIW9yZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5iYWNrdXBEYXRhID8/IFtdKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMudGFibGVEYXRhLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFbZmllbGRdIDwgYltmaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyID09PSAnYXNjJyA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFbZmllbGRdID4gYltmaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyID09PSAnYXNjJyA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbHRlcihmaWx0ZXJWYWx1ZTogYW55LCBoZWFkZXJzPzogVGFibGVIZWFkZXJbXSkge1xuICAgICAgICAvLyB0aGlzLmJhY2t1cERhdGEgPSAoZmlsdGVyVmFsdWUgJiYgIXRoaXMuYmFja3VwRGF0YT8ubGVuZ3RoKSA/IHRoaXMuc2V0QmFja3VwRGF0YSh0aGlzLnRhYmxlRGF0YSkgOiB0aGlzLmJhY2t1cERhdGE7IC8vIFRha2luZyB0aGUgYmFja3VwIG9mIG9yaWdpbmFsIGRhdGFcbiAgICAgICAgaWYgKGhlYWRlcnM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCeVNwZWNpZmllZEZpZWxkcyhoZWFkZXJzLCBmaWx0ZXJWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckJ5QWxsRmllbGRzKGZpbHRlclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbHRlckJ5QWxsRmllbGRzKGZpbHRlclZhbHVlOiBhbnkpIHtcbiAgICAgICAgY29uc3Qgbm9uU2VhcmNoYWJsZUhlYWRlcnMgPSB0aGlzLnRhYmxlSGVhZGVycz8uZmlsdGVyKGhlYWRlciA9PiBoZWFkZXI/LnNlYXJjaD8uY29sdW1uU2VhcmNoSWdub3JlZCk7IC8vIEZpbHRlcmluZyB0aGUgc2VhcmNoIG5vdCBhbGxvd2VkIGNvbHVtbiBoZWFkZXJzXG4gICAgICAgIGNvbnN0IG5vblNlYXJjaEZpZWxkcyA9IG5vblNlYXJjaGFibGVIZWFkZXJzPy5tYXAoaGVhZGVyID0+IGhlYWRlci5maWVsZCk7XG4gICAgICAgIGxldCB0ZW1wb3JhcnlEYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmJhY2t1cERhdGEgPz8gW10pKTtcbiAgICAgICAgdGVtcG9yYXJ5RGF0YSA9IHRlbXBvcmFyeURhdGEuZmlsdGVyKFxuICAgICAgICAgICAgKHJlY29yZDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZWNvcmRGaWVsZCBpbiAocmVjb3JkID8/IHt9KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vblNlYXJjaEZpZWxkcz8uaW5jbHVkZXMocmVjb3JkRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJlY29yZFtyZWNvcmRGaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZT8ubGVuZ3RoICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudGFibGVEYXRhID0gdGVtcG9yYXJ5RGF0YTtcbiAgICB9XG5cbiAgICBmaWx0ZXJCeVNwZWNpZmllZEZpZWxkcyhmaWx0ZXJWYWx1ZTogYW55LCBoZWFkZXJzPzogVGFibGVIZWFkZXJbXSkge1xuXG4gICAgfVxuXG4gICAgbG9hZFBhZ2luYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb25FbmFibGVkICYmIHRoaXMuYmFja3VwRGF0YT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy5wYWdlU2l6ZSAmJiB0aGlzLmJhY2t1cERhdGEubGVuZ3RoID8gdGhpcy5iYWNrdXBEYXRhLmxlbmd0aCAvIHRoaXMucGFnZVNpemUgOiAwKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGFnaW5hdGlvbigxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoYW5nZVBhZ2luYXRpb24ocGFnZTogYW55KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlO1xuICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VEYXRhKCk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFBhZ2VEYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSAmJiB0aGlzLnBhZ2VTaXplICYmIHRoaXMuYmFja3VwRGF0YT8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBwYWdlU3RhcnRJbmRleCA9ICh0aGlzLmN1cnJlbnRQYWdlICogdGhpcy5wYWdlU2l6ZSkgLSB0aGlzLnBhZ2VTaXplO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFja3VwRGF0YS5zbGljZShwYWdlU3RhcnRJbmRleCwgcGFnZVN0YXJ0SW5kZXggKyB0aGlzLnBhZ2VTaXplKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZyhsb2FkaW5nOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGxvYWRpbmc7XG4gICAgfVxuXG4gICAgc2V0Tm9EYXRhKGxvYWRpbmc6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbG9hZGluZztcbiAgICB9XG59XG4iXX0=